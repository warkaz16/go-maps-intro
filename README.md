# Задача – Изучить карты в Go

## Введение

Сегодня ты самостоятельно изучишь **карты** — встроенную структуру данных Go для хранения пар «ключ-значение». Ты научишься создавать карты, добавлять и читать элементы, проверять наличие ключа, удалять элементы и аккуратно обходить частые ошибки новичков (не инициализировал карту, неверный тип ключа, ожидание фиксированного порядка и т.д.).

### Что почитать

1. **A Tour of Go — Maps** ([Go Dev][1])
2. **Go by Example — Maps** ([Go by Example][2])
3. **Go Blog — “Go maps in action”** ([Go Dev][3])
4. **Code Basics — Карты (map) в Go** ([Code Basics][4])
5. **Proglib — Самоучитель (часть про map)** ([Библиотека программиста][5])

## Шпаргалка

- Создание пустой карты: `m := make(map[string]int)`
- Литерал карты:

  ```go
  users := map[string]string{
      "id919": "Кудузов Ахмад",
      "id777": "Назиров Расул",
  }
  ```

- Чтение: `v := m[key]` (если ключа нет — возвращается **нулевое значение**)
- Проверка наличия:

  ```go
  v, ok := m[key] // ok == true, если ключ есть
  ```

- Добавление/изменение: `m["foo"] = 10`
- Удаление: `delete(m, "foo")`
- Длина: `len(m)`
- Обход:

  ```go
  for k, v := range m { /* порядок НЕ гарантируется */ }
  ```

⚠️ Карты — **ссылочный тип**. Присваивание `m2 := m1` не копирует данные, а ссылается на одно и тоже хранилище.

## Постановка задачи

Создай папку проекта, файл `main.go` и выполняй подзадачи по порядку.

### Подзадача 1 — Первое знакомство

1. Создай пустую карту `map[string]int` для хранения количества посещений буткемпа по дням недели: ключ — день (`"Mon"`, `"Tue"` и т.д.), а значение — целое число.
2. Заполни 3–4 значения, выведи карту и её длину.
3. Прочитай значение по ключу, которого нет (например, `"Sun"`), выведи результат и объясни в комментарии, почему ты увидел именно такое число.

### Подзадача 2 — Проверка наличия ключа

1. На основе карты из предыдущей подзадачи реализуй функцию:

   ```go
   func getVisits(m map[string]int, day string) (int, bool)
   ```

   Функция должна возвращать количество посещений и `ok`.

2. В `main` вызови её для существующего и несуществующего дня и выведи читаемые сообщения.

**Критерий приёмки**

- Для существующего дня выводится число и `ok=true`, для отсутствующего — ноль и `ok=false`.

### Подзадача 3 — Удаление и длина

1. Удали существующий ключ (любой из добавленных ранее) функцией `delete`.
2. Удали заведомо несуществующий ключ (например, `"Holiday"`).
3. Выведи длину карты после каждого удаления.

**Критерий приёмки**

- После удаления существующего ключа длина уменьшается на 1, удаление отсутствующего ключа не вызывает ошибок и не меняет длину.

### Подзадача 4 — Обход карты

1. Заполни карту из 6–8 записей: ключ — любой город, значение — достопримечательность этого города.
   Примеры значений:

   - `"Грозный"` → `"Интукод"`
   - `"Урус-мартан"` → `"Автомобильный рынок"`
   - `"Закан-юрт"` → `"Природа"`

2. Сделай **5 раз** подряд цикл `for range` по карте и каждый раз печатай пары `ключ - значение`.
3. Заметь, что порядок меняется. Добавь в код комментарий-объяснение, почему так.

### Подзадача 5 — assignment to entry in nil map

1. Объяви переменную карты через `var m map[string]int` **без** `make`.
2. Попробуй выполнить `m["visits"] = 1`.
3. Зафиксируй ошибку времени выполнения (panic) в комментарии и **исправь**: корректно инициализируй карту с помощью `make`, затем повтори операцию записи.

**Критерий приёмки**

- В комментарии описано, какая паника возникала и почему. Исправленный код работает.

### Подзадача 6 — некорректный тип ключа

1. Создай карту с ключом типа `[]int` (срез) и любым значением.
2. Посмотри на сообщение компилятора и **не удаляй** его из кода — оставь как закомментированный пример с коротким объяснением.
3. Исправь: сделай ключ типа `string`.

**Критерий приёмки**

- В коде есть закомментированный пример с ошибкой компиляции и рядом — рабочая версия с пояснением, что ключи в карте должны быть **сравнимыми** типами.

### Подзадача 7 — Карта значений-структур

1. Опиши структуру:

   ```go
   type Student struct {
       Name   string
       Active bool
   }
   ```

2. Создай карту `map[string]Student`, где ключ — ID студента (`"st1"`, `"st2"`), значение — `Student`.
3. Добавь 2–3 записи, выведи одного студента по ключу.
4. Измени поле `Active` у одного студента: получи значение, измени поле у локальной переменной и запиши обратно в карту.

### Подзадача 8 — Ссылочная семантика карт

1. Создай карту `a := map[string]int{"Mon": 10}`.
2. Сделай `b := a`, затем выполни `b["Mon"] = 99`.
3. Выведи обе карты и объясни в комментарии, почему в обеих видно `99`.
4. Реализуй копию:

   ```go
   func clone(src map[string]int) map[string]int
   ```

   Скопируй все пары в новый `make`-экземпляр. Проверь, что изменение копии не влияет на исходную.

**Критерий приёмки**

- Пояснение про ссылочный тип есть, функция `clone` работает как независимая копия.

### Подзадача 9 — счётчик слов

1. Напиши функцию:

   ```go
   func WordCount(s string) map[string]int
   ```

   которая возвращает карту `"слово": количество`.

2. Разбей строку на слова с помощью `strings.Fields`.
3. В `main` протестируй на фразах:

   - `"go go gopher"`
   - `"интукод школа программирования интокод"`

### Подзадача 10 — простая база телефонов

1. Опиши карту: `phones := map[string]string{}` где ключ — имя, значение — номер.
2. Напиши 3 функции:

   ```go
   func Add(phones map[string]string, name, number string)
   func Get(phones map[string]string, name string) (string, bool)
   func Remove(phones map[string]string, name string)
   ```

3. В `main` добавь 3 контакта, выведи все пары (`for range`), получи номер по имени, удали один контакт и снова выведи длину.

**Критерий приёмки**

- Все операции выполняются без ошибок, поиск корректно отличает «нет ключа» от пустой строки.

[1]: https://go.dev/tour/moretypes/19 'Maps'
[2]: https://gobyexample.com/maps 'Go by Example: Maps'
[3]: https://go.dev/blog/maps 'Go maps in action'
[4]: https://code-basics.com/ru/languages/go/lessons/map 'Уроки Golang - Карты - CodeBasics'
[5]: https://proglib.io/p/samouchitel-po-go-dlya-nachinayushchih-chast-8-stroki-runy-bayty-paket-strings-hesh-tablica-map-2024-02-15 'Строки, руны, байты. Пакет strings. Хеш-таблица (map)'
